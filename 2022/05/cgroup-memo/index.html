<!doctype html><html lang=zh-CH><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>cgroup memo - 杂货铺</title><meta name=Description content="杂七杂八的，随手记录。"><meta property="og:url" content="https://yangyingchao.github.io/2022/05/cgroup-memo/"><meta property="og:site_name" content="杂货铺"><meta property="og:title" content="cgroup memo"><meta property="og:description" content="Table of Contents 1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups :
In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective, and called such in the remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup memberships of the threads in a process."><meta property="og:locale" content="zh_CH"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-01T00:00:00+00:00"><meta property="og:image" content="https://yangyingchao.github.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yangyingchao.github.io/logo.png"><meta name=twitter:title content="cgroup memo"><meta name=twitter:description content="Table of Contents 1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups :
In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective, and called such in the remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup memberships of the threads in a process."><meta name=application-name content="杂货铺"><meta name=apple-mobile-web-app-title content="杂货铺"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://yangyingchao.github.io/2022/05/cgroup-memo/><link rel=prev href=https://yangyingchao.github.io/2022/05/p2085-alkowaileet/><link rel=next href=https://yangyingchao.github.io/2022/05/p752-zhu/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"cgroup memo","inLanguage":"zh-CH","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/yangyingchao.github.io\/2022\/05\/cgroup-memo\/"},"image":["https:\/\/yangyingchao.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","wordcount":315,"url":"https:\/\/yangyingchao.github.io\/2022\/05\/cgroup-memo\/","datePublished":"2022-05-01T00:00:00+00:00","dateModified":"2022-05-01T00:00:00+00:00","publisher":{"@type":"Organization","name":"xxxx","logo":{"@type":"ImageObject","url":"https:\/\/yangyingchao.github.io\/images\/avatar.jpg","width":160,"height":160}},"author":{"@type":"Person","name":"yc"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=杂货铺><span class=header-title-pre><i class='fa-solid fa-house-chimney'></i></span>老杨的杂货铺</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>所有文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=https://github.com/yangyingchao title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=杂货铺><span class=header-title-pre><i class='fa-solid fa-house-chimney'></i></span>老杨的杂货铺</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>所有文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=https://github.com/yangyingchao title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">cgroup memo</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>yc</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-05-01>2022-05-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 315 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 1 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd><span class=section-num>1</span> Threads (Tasks (threads) versus processes)</a><ul><li><a href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159><span class=section-num>1.1</span> cgroup v2 线程限制</a></li></ul></li></ul></nav></div></div><div class=content id=content><div class="ox-hugo-toc toc has-section-numbers"><div class=heading>Table of Contents</div><ul><li><span class=section-num>1</span> <a href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd rel>Threads (Tasks (threads) versus processes)</a><ul><li><span class=section-num>1.1</span> <a href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159 rel>cgroup v2 线程限制</a></li></ul></li></ul></div><h2 id=h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd><span class=section-num>1</span> Threads (Tasks (threads) versus processes)</h2><p>cgroup v1 可以单独操作进程中的线程, <code>man cgroups</code> :</p><blockquote><p>In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of
multiple tasks (more commonly called threads, from a user-space perspective, and called such in the
remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup
memberships of the threads in a process.</p></blockquote><p>v2 中起初移除了线程支持，然后在后期又将其中的功能 “有限的” 加了回来：</p><blockquote><p>The cgroups v1 ability to split threads across different cgroups caused problems in some cases. For example, it
made no sense for the memory controller, since all of the threads of a process share a single address space.
Because of these problems, the ability to independently manipulate the cgroup memberships of the threads in a
process was removed in the initial cgroups v2 implementation, and subsequently restored in a more limited form
(see the discussion of &ldquo;thread mode&rdquo; below).</p></blockquote><h3 id=h:5fc61e35-bc73-442b-a063-74b0de3cf159><span class=section-num>1.1</span> cgroup v2 线程限制</h3><p>Linux 4.14 为 cgroup v2 增加了线程模式，该模式可以：</p><blockquote><p>• The creation of threaded subtrees in which the threads of a process may be spread across cgroups inside
the tree. (A threaded subtree may contain multiple multithreaded processes.)</p><p>• The concept of threaded controllers, which can distribute resources across the cgroups in a threaded
subtree.</p><p>• A relaxation of the &ldquo;no internal processes rule&rdquo;, so that, within a threaded subtree, a cgroup can both
contain member threads and exercise resource control over child cgroups.</p></blockquote></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-05-01</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2022/05/p2085-alkowaileet/ class=prev rel=prev title="Columnar Formats for Schemaless LSM-based Document Stores"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Columnar Formats for Schemaless LSM-based Document Stores</a>
<a href=/2022/05/p752-zhu/ class=next rel=next title="Cardinality Estimation in DBMS: A Comprehensive Benchmark Evaluation">Cardinality Estimation in DBMS: A Comprehensive Benchmark Evaluation<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>