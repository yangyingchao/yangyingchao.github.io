<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云 | MyNotes</title><meta name=keywords content="慢查询,pg"><meta name=description content="1 慢查询 1.1 功能说明 1.2 监控视图 1.3 慢 SQL 列表 1.4 慢 SQL 统计分析 1.5 功能说明 2 错误日志 3 错误日志默认设置 4 运行日志管理 4.1 PG_LOG 介绍 4.2 修改 PG_LOG 保留时长 本文为摘录，"><meta name=author content><link rel=canonical href=https://yangyingchao.github.io/posts/10790/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yangyingchao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yangyingchao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangyingchao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://yangyingchao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://yangyingchao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云"><meta property="og:description" content="1 慢查询 1.1 功能说明 1.2 监控视图 1.3 慢 SQL 列表 1.4 慢 SQL 统计分析 1.5 功能说明 2 错误日志 3 错误日志默认设置 4 运行日志管理 4.1 PG_LOG 介绍 4.2 修改 PG_LOG 保留时长 本文为摘录，"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/10790/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-15T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云"><meta name=twitter:description content="1 慢查询 1.1 功能说明 1.2 监控视图 1.3 慢 SQL 列表 1.4 慢 SQL 统计分析 1.5 功能说明 2 错误日志 3 错误日志默认设置 4 运行日志管理 4.1 PG_LOG 介绍 4.2 修改 PG_LOG 保留时长 本文为摘录，"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://yangyingchao.github.io/posts/"},{"@type":"ListItem","position":3,"name":"云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云","item":"https://yangyingchao.github.io/posts/10790/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云","name":"云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云","description":"1 慢查询 1.1 功能说明 1.2 监控视图 1.3 慢 SQL 列表 1.4 慢 SQL 统计分析 1.5 功能说明 2 错误日志 3 错误日志默认设置 4 运行日志管理 4.1 PG_LOG 介绍 4.2 修改 PG_LOG 保留时长 本文为摘录，","keywords":["慢查询","pg"],"articleBody":" 1 慢查询 1.1 功能说明 1.2 监控视图 1.3 慢 SQL 列表 1.4 慢 SQL 统计分析 1.5 功能说明 2 错误日志 3 错误日志默认设置 4 运行日志管理 4.1 PG_LOG 介绍 4.2 修改 PG_LOG 保留时长 本文为摘录，原文为： https://cloud.tencent.com/document/product/409/10790\n摘自：https://cloud.tencent.com/document/product/409/49546\n1 慢查询 1.1 功能说明 默认数据库对超过 1s 的 SQL 语句查询判断为 “ 慢查询 ”，对应语句称为“ 慢查询语句 （俗 称 慢 SQL ）”，而数据库管理员（DBA）对慢查询语句进行分析并找到慢查询出现原因的过程叫做 慢查询分析 。﻿云数据库 PostgreSQL 控制台 在实例管理页的性能优化模块下，提供慢查询分析能 力。如下图：\n1.2 监控视图 控制台中的两个图表为监控视图，可以直观方便地查看数据库慢 SQL 的相关信息。 慢查询与其他监 控组合视图：支持通过图表化形式查看慢查询指标以及与其他指标联合对比查看的能力。可以支持的 其他指标有：\nCPU 利用率， QPS， 请求数， 读请求数， 写请求数， 其他请求数， 缓冲区缓存命中率 平均执行时延。 慢 SQL 耗时分布： 可以通过不同时间段的慢 SQL 进行查看慢查询主要分布在什么时段区间内。\n1.3 慢 SQL 列表 慢 SQL 列表可以实时查看数据库中所产生的慢 SQL 语句，列表根据时间降序排列，最新产生的慢 SQL 会自动生成显示在第一行。 支持查看的慢 SQL 字段：执行时间，慢 SQL 语句，总耗时，客户 端 IP 地址，数据库名，执行用户。\n注意： 慢 SQL 列表默认保存最近 7 天的慢 SQL 数据与最大 50GiB 的日志总量，当哪一个条件率先满足， 则会自动删除超出要求的日志。当单条慢 SQL 大于 20KB，将无法从控制台上查看，请 提交工单，联 系腾讯云为您提供。\n1.4 慢 SQL 统计分析 慢 SQL 统计分析可以根据指定时间范围内的所有慢 SQL 经过系统的参数抽象后，对同类 SQL 进行聚合分析得到的慢 SQL 分析信息。其 中包含多种字段信息。\n最后执行时间： 在统计范围内，该抽象语句最后一次出现的时间，由于某些预计执行较长，我们统一按语句执行的 begin_time 记录。 抽象后的 SQL 语句： 去掉慢 SQL 中常数后的语句，抽象后的语句可以将同类同性质的语句进行汇总统计，以方便您更好的分析。 数据库： 该语句调用了哪个数据库。 账号： 该语句是使用哪个账号来运行的。 客户端 IP 地址： 语句在哪些客户端上执行过。 首次执行时间： 在统计范围内，该慢 SQL 第一次出现的时间（抽象后汇总后，可能有很多条记录）。 执行总时间： 在统计范围内，慢查询语句查询总耗时。 平均执行时间： 慢查询语句总时间除以总次数的平均时间。 最小执行时间： 所有该条抽象语句中，慢查询语句出现的最小时间；用于帮助判断该语句是否偶发性事件。 最大执行时间： 所有该条抽象语句中，慢查询语句出现的最大时间；用于帮助判断该语句是否偶发性事件。 总时间占比： 在统计范围内，慢查询语句占所有慢查询语句时间的占比。 1.5 功能说明 2 错误日志 数据库运行过程中，因操作、SQL、系统运行错误等原因产生的日志叫做错误日志，错误日志常用于 开发者找出业务系统或数据库出现问题的原因。\n云数据库 PostgreSQL 在实例管理页的性能优化模块下，提供错误日志查看能力。如下图：\n3 错误日志默认设置 错误日志功能： 默认开启 错误日志记录级别： log_min_error_statement=ERROR 分析数据输出延迟： 1分钟 - 5分钟 日志记录时长： 7天 （最大最近 10000 条） 4 运行日志管理 :PROPERTIES: :CUSTOM_ID: h:080465e3-1261-4a03-8ee6-0562db8aced3 :NOTER_DOCUMENT: https://cloud.tencent.com/document/product/409/95763 :NOTER_OPEN: eww :NOTER_PAGE: 1\n4.1 PG_LOG 介绍 pg_log 一般是记录数据库的状态信息，例如：错误信息、慢查询 SQL、数据库的启动关闭信息等。 该日志会按大小和时间自动切割，当前云数据库 PostgreSQL 的 pg_log 默认保留 30 天。pg_log 会 占用数据库实例的存储空间，您可以基于实际需要来修改保留时长。\n说明： 数据库实例的慢日志和错误日志默认保留 7 天，修改 pg_log 保留时长不影响慢日志和错误日志保留 时长。\n4.2 修改 PG_LOG 保留时长 您可以基于实际需要修改 pg_log 保留时长，系统当前支持 7 天和 30 天两种。具体操作如下：\n登录 云数据库 PostgreSQL 控制台。 在实例列表找到需要修改的实例，单击操作 \u003e 管理，进入实例详情。 在实例详情页找到参数设置，在右上方搜索框中搜索需要设置的参数 log_filename 并更新。 log_filename 参数说明如下：\n参数值 说明 postgresql_%a_%H.log 选择该值，日志保留 7 天。 postgresql_%d_%H.log 选择该值，日志保留 30 天，系统默认保留 30 天。 ","wordCount":"1610","inLanguage":"zh-cn","datePublished":"2023-08-15T00:00:00Z","dateModified":"2023-08-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://yangyingchao.github.io/posts/10790/"},"publisher":{"@type":"Organization","name":"MyNotes","logo":{"@type":"ImageObject","url":"https://yangyingchao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yangyingchao.github.io accesskey=h title="MyNotes (Alt + H)">MyNotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yangyingchao.github.io/ title=Home><span>Home</span></a></li><li><a href=https://yangyingchao.github.io/posts/ title=Archives><span>Archives</span></a></li><li><a href=https://yangyingchao.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yangyingchao.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://yangyingchao.github.io/contact/ title="Contact me"><span>Contact me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>云数据库 PostgreSQL 日志管理及分析-操作指南-文档中心-腾讯云</h1><div class=post-meta><span title='2023-08-15 00:00:00 +0000 UTC'>August 15, 2023</span></div></header><div class=post-content><ul><li>1 <a href=#h:6019344d-20aa-4954-b9ed-429bc6cf3cdc>慢查询</a><ul><li>1.1 <a href=#h:d92eb969-c035-4657-ac55-97449699f838>功能说明</a></li><li>1.2 <a href=#h:48d6dc25-ade1-49c2-9ce0-01d0ecbd8a70>监控视图</a></li><li>1.3 <a href=#h:07fca319-fb97-4c7b-a284-91bad80ce140>慢 SQL 列表</a></li><li>1.4 <a href=#h:e8ff9b3e-464b-436e-8cee-3fabc34a65b1>慢 SQL 统计分析</a></li><li>1.5 <a href=#h:ec0e6696-823d-4eb2-8916-b979e9aa045b>功能说明</a></li></ul></li><li>2 <a href=#h:674b234e-48fd-42bf-a2ce-904622df68ef>错误日志</a></li><li>3 <a href=#h:224bdb02-4654-4c42-963f-6e8ca391f4e9>错误日志默认设置</a></li><li>4 <a href=#h:62c155e2-aeaa-4b3e-9e5e-e1c5ac54a187>运行日志管理</a><ul><li>4.1 <a href=#h:a3fb6be9-2579-4a55-a635-798f91063de3>PG_LOG 介绍</a></li><li>4.2 <a href=#h:f07d52de-34f0-4c36-84ed-b1592578e807>修改 PG_LOG 保留时长</a></li></ul></li></ul><p>本文为摘录，原文为： <a href=https://cloud.tencent.com/document/product/409/10790>https://cloud.tencent.com/document/product/409/10790</a></p><p>摘自：<a href=https://cloud.tencent.com/document/product/409/49546>https://cloud.tencent.com/document/product/409/49546</a></p><h2 id=h:6019344d-20aa-4954-b9ed-429bc6cf3cdc>1 慢查询<a hidden class=anchor aria-hidden=true href=#h:6019344d-20aa-4954-b9ed-429bc6cf3cdc>#</a></h2><h3 id=h:d92eb969-c035-4657-ac55-97449699f838>1.1 功能说明<a hidden class=anchor aria-hidden=true href=#h:d92eb969-c035-4657-ac55-97449699f838>#</a></h3><p>默认数据库对超过 1s 的 SQL 语句查询判断为 “ <strong>慢查询</strong> ”，对应语句称为“ <strong>慢查询语句</strong> （俗
称 <strong>慢 SQL</strong> ）”，而数据库管理员（DBA）对慢查询语句进行分析并找到慢查询出现原因的过程叫做
<strong>慢查询分析</strong> 。﻿云数据库 PostgreSQL 控制台 在实例管理页的性能优化模块下，提供慢查询分析能
力。如下图：</p><figure><img loading=lazy src=/ox-hugo/64ec9ef692ae5c01e9e4db61bac23b00.png width=800px></figure><h3 id=h:48d6dc25-ade1-49c2-9ce0-01d0ecbd8a70>1.2 监控视图<a hidden class=anchor aria-hidden=true href=#h:48d6dc25-ade1-49c2-9ce0-01d0ecbd8a70>#</a></h3><p>控制台中的两个图表为监控视图，可以直观方便地查看数据库慢 SQL 的相关信息。 慢查询与其他监
控组合视图：支持通过图表化形式查看慢查询指标以及与其他指标联合对比查看的能力。可以支持的
其他指标有：</p><ul><li>CPU 利用率，</li><li>QPS，</li><li>请求数，</li><li>读请求数，</li><li>写请求数，</li><li>其他请求数，</li><li>缓冲区缓存命中率</li><li>平均执行时延。</li></ul><p>慢 SQL 耗时分布： 可以通过不同时间段的慢 SQL 进行查看慢查询主要分布在什么时段区间内。</p><h3 id=h:07fca319-fb97-4c7b-a284-91bad80ce140>1.3 慢 SQL 列表<a hidden class=anchor aria-hidden=true href=#h:07fca319-fb97-4c7b-a284-91bad80ce140>#</a></h3><p>慢 SQL 列表可以实时查看数据库中所产生的慢 SQL 语句，列表根据时间降序排列，最新产生的慢
SQL 会自动生成显示在第一行。 支持查看的慢 SQL 字段：执行时间，慢 SQL 语句，总耗时，客户
端 IP 地址，数据库名，执行用户。</p><p>注意： 慢 SQL 列表默认保存最近 7 天的慢 SQL 数据与最大 50GiB 的日志总量，当哪一个条件率先满足，
则会自动删除超出要求的日志。当单条慢 SQL 大于 20KB，将无法从控制台上查看，请 提交工单，联
系腾讯云为您提供。</p><h3 id=h:e8ff9b3e-464b-436e-8cee-3fabc34a65b1>1.4 慢 SQL 统计分析<a hidden class=anchor aria-hidden=true href=#h:e8ff9b3e-464b-436e-8cee-3fabc34a65b1>#</a></h3><p>慢 SQL 统计分析可以根据指定时间范围内的所有慢 SQL 经过系统的参数抽象后，对同类 SQL 进行聚合分析得到的慢 SQL 分析信息。其
中包含多种字段信息。</p><ul><li><strong>最后执行时间：</strong> 在统计范围内，该抽象语句最后一次出现的时间，由于某些预计执行较长，我们统一按语句执行的 begin_time 记录。</li><li><strong>抽象后的 SQL 语句：</strong> 去掉慢 SQL 中常数后的语句，抽象后的语句可以将同类同性质的语句进行汇总统计，以方便您更好的分析。</li><li><strong>数据库：</strong> 该语句调用了哪个数据库。</li><li><strong>账号：</strong> 该语句是使用哪个账号来运行的。</li><li><strong>客户端 IP 地址：</strong> 语句在哪些客户端上执行过。</li><li><strong>首次执行时间：</strong> 在统计范围内，该慢 SQL 第一次出现的时间（抽象后汇总后，可能有很多条记录）。</li><li><strong>执行总时间：</strong> 在统计范围内，慢查询语句查询总耗时。</li><li><strong>平均执行时间：</strong> 慢查询语句总时间除以总次数的平均时间。</li><li><strong>最小执行时间：</strong> 所有该条抽象语句中，慢查询语句出现的最小时间；用于帮助判断该语句是否偶发性事件。</li><li><strong>最大执行时间：</strong> 所有该条抽象语句中，慢查询语句出现的最大时间；用于帮助判断该语句是否偶发性事件。</li><li><strong>总时间占比：</strong> 在统计范围内，慢查询语句占所有慢查询语句时间的占比。</li></ul><h3 id=h:ec0e6696-823d-4eb2-8916-b979e9aa045b>1.5 功能说明<a hidden class=anchor aria-hidden=true href=#h:ec0e6696-823d-4eb2-8916-b979e9aa045b>#</a></h3><h2 id=h:674b234e-48fd-42bf-a2ce-904622df68ef>2 错误日志<a hidden class=anchor aria-hidden=true href=#h:674b234e-48fd-42bf-a2ce-904622df68ef>#</a></h2><p>数据库运行过程中，因操作、SQL、系统运行错误等原因产生的日志叫做错误日志，错误日志常用于
开发者找出业务系统或数据库出现问题的原因。</p><p>云数据库 PostgreSQL 在实例管理页的性能优化模块下，提供错误日志查看能力。如下图：</p><figure><img loading=lazy src=/ox-hugo/3cc9ca2b764a79032fa9055618df448f.png width=800px></figure><h2 id=h:224bdb02-4654-4c42-963f-6e8ca391f4e9>3 错误日志默认设置<a hidden class=anchor aria-hidden=true href=#h:224bdb02-4654-4c42-963f-6e8ca391f4e9>#</a></h2><ul><li>错误日志功能： 默认开启</li><li>错误日志记录级别： <code>log_min_error_statement=ERROR</code></li><li>分析数据输出延迟： <code>1分钟 - 5分钟</code></li><li>日志记录时长： <code>7天</code> （最大最近 10000 条）</li></ul><h2 id=h:62c155e2-aeaa-4b3e-9e5e-e1c5ac54a187>4 运行日志管理<a hidden class=anchor aria-hidden=true href=#h:62c155e2-aeaa-4b3e-9e5e-e1c5ac54a187>#</a></h2><p>:PROPERTIES:
:CUSTOM_ID: h:080465e3-1261-4a03-8ee6-0562db8aced3
:NOTER_DOCUMENT: <a href=https://cloud.tencent.com/document/product/409/95763>https://cloud.tencent.com/document/product/409/95763</a>
:NOTER_OPEN: eww
:NOTER_PAGE: 1</p><h3 id=h:a3fb6be9-2579-4a55-a635-798f91063de3>4.1 PG_LOG 介绍<a hidden class=anchor aria-hidden=true href=#h:a3fb6be9-2579-4a55-a635-798f91063de3>#</a></h3><p>pg_log 一般是记录数据库的状态信息，例如：错误信息、慢查询 SQL、数据库的启动关闭信息等。
该日志会按大小和时间自动切割，当前云数据库 PostgreSQL 的 pg_log 默认保留 30 天。pg_log 会
占用数据库实例的存储空间，您可以基于实际需要来修改保留时长。</p><p><strong>说明：</strong>
数据库实例的慢日志和错误日志默认保留 7 天，修改 pg_log 保留时长不影响慢日志和错误日志保留
时长。</p><h3 id=h:f07d52de-34f0-4c36-84ed-b1592578e807>4.2 修改 PG_LOG 保留时长<a hidden class=anchor aria-hidden=true href=#h:f07d52de-34f0-4c36-84ed-b1592578e807>#</a></h3><p>您可以基于实际需要修改 pg_log 保留时长，系统当前支持 7 天和 30 天两种。具体操作如下：</p><ol><li>登录 云数据库 PostgreSQL 控制台。</li><li>在实例列表找到需要修改的实例，单击操作 > 管理，进入实例详情。</li><li>在实例详情页找到参数设置，在右上方搜索框中搜索需要设置的参数 log_filename 并更新。</li></ol><p>log_filename 参数说明如下：</p><table><thead><tr><th>参数值</th><th>说明</th></tr></thead><tbody><tr><td>postgresql_%a_%H.log</td><td>选择该值，日志保留 7 天。</td></tr><tr><td>postgresql_%d_%H.log</td><td>选择该值，日志保留 30 天，系统默认保留 30 天。</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://yangyingchao.github.io/tags/%E6%85%A2%E6%9F%A5%E8%AF%A2/>慢查询</a></li><li><a href=https://yangyingchao.github.io/tags/pg/>pg</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://yangyingchao.github.io>MyNotes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>