<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How can 3ware and MegaRAID performance be increased in Linux? | MyNotes</title><meta name=keywords content><meta name=description content="1 Question 2 Answer 2.1 For the Linux 2.6 kernel: 2.2 For the Linux 2.4 kernel: 本文为摘录，原文为： https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux 1 Question How can LSI 3ware and LSI MegaRAID performance be increased in Linux? 2 Answer 2.1 For the Linux 2.6 kernel: See KB article A004958 Article ID 1211161457978 See also: Article ID 1211161479669 Third party software such as SarCheck http://www.sarcheck.com can also"><meta name=author content="Yang, Ying-chao"><link rel=canonical href=https://yangyingchao.github.io/posts/1211161453667_how-can-3ware-and-megaraid-performance-be-increased-in-linux/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yangyingchao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yangyingchao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangyingchao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://yangyingchao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://yangyingchao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How can 3ware and MegaRAID performance be increased in Linux?"><meta property="og:description" content="1 Question 2 Answer 2.1 For the Linux 2.6 kernel: 2.2 For the Linux 2.4 kernel: 本文为摘录，原文为： https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux 1 Question How can LSI 3ware and LSI MegaRAID performance be increased in Linux? 2 Answer 2.1 For the Linux 2.6 kernel: See KB article A004958 Article ID 1211161457978 See also: Article ID 1211161479669 Third party software such as SarCheck http://www.sarcheck.com can also"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/1211161453667_how-can-3ware-and-megaraid-performance-be-increased-in-linux/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-28T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How can 3ware and MegaRAID performance be increased in Linux?"><meta name=twitter:description content="1 Question 2 Answer 2.1 For the Linux 2.6 kernel: 2.2 For the Linux 2.4 kernel: 本文为摘录，原文为： https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux 1 Question How can LSI 3ware and LSI MegaRAID performance be increased in Linux? 2 Answer 2.1 For the Linux 2.6 kernel: See KB article A004958 Article ID 1211161457978 See also: Article ID 1211161479669 Third party software such as SarCheck http://www.sarcheck.com can also"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://yangyingchao.github.io/posts/"},{"@type":"ListItem","position":3,"name":"How can 3ware and MegaRAID performance be increased in Linux?","item":"https://yangyingchao.github.io/posts/1211161453667_how-can-3ware-and-megaraid-performance-be-increased-in-linux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How can 3ware and MegaRAID performance be increased in Linux?","name":"How can 3ware and MegaRAID performance be increased in Linux?","description":"1 Question 2 Answer 2.1 For the Linux 2.6 kernel: 2.2 For the Linux 2.4 kernel: 本文为摘录，原文为： https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux 1 Question How can LSI 3ware and LSI MegaRAID performance be increased in Linux? 2 Answer 2.1 For the Linux 2.6 kernel: See KB article A004958 Article ID 1211161457978 See also: Article ID 1211161479669 Third party software such as SarCheck http://www.sarcheck.com can also","keywords":[],"articleBody":" 1 Question 2 Answer 2.1 For the Linux 2.6 kernel: 2.2 For the Linux 2.4 kernel: 本文为摘录，原文为： https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux\n1 Question How can LSI 3ware and LSI MegaRAID performance be increased in Linux?\n2 Answer 2.1 For the Linux 2.6 kernel: See KB article A004958 Article ID 1211161457978 See also: Article ID 1211161479669\nThird party software such as SarCheck http://www.sarcheck.com can also be used.\n2.1.1 For Hard Disk Drives (HDDs): echo \"deadline\" \u003e /sys/block/sda/queue/scheduler (Turn on deadline I/O scheduler) 2.1.2 For Solid State Drives (SSDs): In addition to\necho \"deadline\" \u003e /sys/block/sda/queue/scheduler (Turn on deadline I/O scheduler) these will increase performance with SSDs:\necho \"0\" \u003e /sys/block/sda/queue/rotational (Turn off seek reordering) echo \"975\" \u003e /sys/block/sda/queue/nr_requests (Turn up block layer queue depth for sda to 975) echo \"975\" \u003e /sys/block/sda/device/queue_depth (Turn up driver queue depth for sda to 975) kernel OS is 2.6.18 which limits the MegaRAID controller’s ability to use smp_affinity when used with motherboards with multiple processors (kernel 2.6.32 allows smp_affinity)\n2.2 For the Linux 2.4 kernel: Tuning Linux VM parameters may help to increase the read performance, depending your RAID type, application, and other factors. You can try this setting and see if it helps increase performance in your situation.\nThe settings are: To make the change without having to reboot (change will not survive after a reboot), type the following from a command prompt:\necho \"2048\" \u003e/proc/sys/vm/min-readahead echo \"2048\" \u003e/proc/sys/vm/max-readahead To make the change permanent, modify /etc/sysctl.conf and add the following lines:\nvm.max-readahead=2048 vm.min-readahead=2048 In addition, you can modify the bdflush parameter:\nsysctl -w \"vm.bdflush=10 500 0 0 500 3000 0 20 0\" Other information on Linux system tuning is available from: http://people.redhat.com/alikins/system_tuning.html\nThere are no other 3ware specific tuning parameters for Linux for read performance.\n","wordCount":"297","inLanguage":"zh-cn","datePublished":"2023-12-28T00:00:00Z","dateModified":"2023-12-28T00:00:00Z","author":[{"@type":"Person","name":"Yang"},{"@type":"Person","name":"Ying-chao"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://yangyingchao.github.io/posts/1211161453667_how-can-3ware-and-megaraid-performance-be-increased-in-linux/"},"publisher":{"@type":"Organization","name":"MyNotes","logo":{"@type":"ImageObject","url":"https://yangyingchao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yangyingchao.github.io accesskey=h title="MyNotes (Alt + H)">MyNotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yangyingchao.github.io/ title=Home><span>Home</span></a></li><li><a href=https://yangyingchao.github.io/posts/ title=Archives><span>Archives</span></a></li><li><a href=https://yangyingchao.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yangyingchao.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://yangyingchao.github.io/contact/ title="Contact me"><span>Contact me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How can 3ware and MegaRAID performance be increased in Linux?</h1><div class=post-meta><span title='2023-12-28 00:00:00 +0000 UTC'>December 28, 2023</span>&nbsp;·&nbsp;Yang, Ying-chao</div></header><div class=post-content><ul><li>1 <a href=#h:641d66f2-5305-4f2f-a446-d78296b4a02a>Question</a></li><li>2 <a href=#h:531f86fa-2a4b-45e9-9414-8ed646ddae4a>Answer</a><ul><li>2.1 <a href=#h:73ac6463-9f36-49ae-93bf-6bcc9cbd4ddc>For the Linux 2.6 kernel:</a></li><li>2.2 <a href=#h:3fd1f3eb-0d39-4ee2-896c-54fe8b29d1af>For the Linux 2.4 kernel:</a></li></ul></li></ul><p>本文为摘录，原文为： <a href=https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux>https://www.broadcom.com/support/knowledgebase/1211161453667/how-can-3ware-and-megaraid-performance-be-increased-in-linux</a></p><h2 id=h:641d66f2-5305-4f2f-a446-d78296b4a02a>1 Question<a hidden class=anchor aria-hidden=true href=#h:641d66f2-5305-4f2f-a446-d78296b4a02a>#</a></h2><p>How can LSI 3ware and LSI MegaRAID performance be increased in Linux?</p><h2 id=h:531f86fa-2a4b-45e9-9414-8ed646ddae4a>2 Answer<a hidden class=anchor aria-hidden=true href=#h:531f86fa-2a4b-45e9-9414-8ed646ddae4a>#</a></h2><h3 id=h:73ac6463-9f36-49ae-93bf-6bcc9cbd4ddc>2.1 For the Linux 2.6 kernel:<a hidden class=anchor aria-hidden=true href=#h:73ac6463-9f36-49ae-93bf-6bcc9cbd4ddc>#</a></h3><p>See KB article A004958 Article ID 1211161457978
See also: Article ID 1211161479669</p><p>Third party software such as SarCheck <a href=http://www.sarcheck.com>http://www.sarcheck.com</a> can also be used.</p><h4 id=h:2a4fb8ae-a6a2-4515-9082-6dd5ea887aa2>2.1.1 For Hard Disk Drives (HDDs):<a hidden class=anchor aria-hidden=true href=#h:2a4fb8ae-a6a2-4515-9082-6dd5ea887aa2>#</a></h4><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;deadline&#34;</span> &gt; /sys/block/sda/queue/scheduler  <span style=color:#666>(</span>Turn on deadline I/O scheduler<span style=color:#666>)</span>
</span></span></code></pre></div><h4 id=h:0c40a8ae-bb4c-452b-ac20-cd7dd087a7dd>2.1.2 For Solid State Drives (SSDs):<a hidden class=anchor aria-hidden=true href=#h:0c40a8ae-bb4c-452b-ac20-cd7dd087a7dd>#</a></h4><p>In addition to</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;deadline&#34;</span> &gt; /sys/block/sda/queue/scheduler <span style=color:#666>(</span>Turn on deadline I/O scheduler<span style=color:#666>)</span>
</span></span></code></pre></div><p>these will increase performance with SSDs:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;0&#34;</span> &gt; /sys/block/sda/queue/rotational   <span style=color:#666>(</span>Turn off seek reordering<span style=color:#666>)</span>
</span></span><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;975&#34;</span> &gt; /sys/block/sda/queue/nr_requests  <span style=color:#666>(</span>Turn up block layer queue depth <span style=color:green;font-weight:700>for</span> sda to 975<span style=color:#666>)</span>
</span></span><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;975&#34;</span> &gt; /sys/block/sda/device/queue_depth <span style=color:#666>(</span>Turn up driver queue depth <span style=color:green;font-weight:700>for</span> sda to 975<span style=color:#666>)</span>
</span></span></code></pre></div><p>kernel OS is 2.6.18 which limits the MegaRAID controller&rsquo;s ability to use smp_affinity when used with motherboards with multiple processors (kernel 2.6.32 allows smp_affinity)</p><h3 id=h:3fd1f3eb-0d39-4ee2-896c-54fe8b29d1af>2.2 For the Linux 2.4 kernel:<a hidden class=anchor aria-hidden=true href=#h:3fd1f3eb-0d39-4ee2-896c-54fe8b29d1af>#</a></h3><p>Tuning Linux VM parameters may help to increase the read performance, depending your RAID type, application, and other factors. You can try this setting and see if it helps increase performance in your situation.</p><p>The settings are: To make the change without having to reboot (change will not survive after a reboot), type the following from a command prompt:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;2048&#34;</span> &gt;/proc/sys/vm/min-readahead
</span></span><span style=display:flex><span><span style=color:green>echo</span> <span style=color:#ba2121>&#34;2048&#34;</span> &gt;/proc/sys/vm/max-readahead
</span></span></code></pre></div><p>To make the change permanent, modify /etc/sysctl.conf and add the following lines:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=display:flex><span><span style=color:#7d9029>vm.max-readahead</span><span style=color:#666>=</span><span style=color:#ba2121>2048</span>
</span></span><span style=display:flex><span><span style=color:#7d9029>vm.min-readahead</span><span style=color:#666>=</span><span style=color:#ba2121>2048</span>
</span></span></code></pre></div><p>In addition, you can modify the bdflush parameter:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sysctl -w <span style=color:#ba2121>&#34;vm.bdflush=10 500 0 0 500 3000 0 20 0&#34;</span>
</span></span></code></pre></div><p>Other information on Linux system tuning is available from: <a href=http://people.redhat.com/alikins/system_tuning.html>http://people.redhat.com/alikins/system_tuning.html</a></p><p>There are no other 3ware specific tuning parameters for Linux for read performance.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://yangyingchao.github.io>MyNotes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>