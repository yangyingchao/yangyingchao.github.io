<!doctype html><html lang=zh-cn><head><title>cgroup memo · MyNotes</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="yyc"><meta name=description content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) 链接到标题 cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="cgroup memo"><meta name=twitter:description content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) 链接到标题 cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called"><meta property="og:title" content="cgroup memo"><meta property="og:description" content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) 链接到标题 cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/cgroup-memo/"><meta property="article:section" content="posts"><link rel=canonical href=https://yangyingchao.github.io/posts/cgroup-memo/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.135e22c97ff685fe983fc60048e309ced8f00d8d38f536aa67dba8a13a03dfa4.css integrity="sha256-E14iyX/2hf6YP8YASOMJztjwDY049TaqZ9uooToD36Q=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>MyNotes</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://yangyingchao.github.io/posts/cgroup-memo/>cgroup memo</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=0001-01-01T00:00:00Z>January 1, 0001</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：1 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/tag1/>tag1</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/tag2/>tag2</a></span></div></div></header><div class=post-content><ul><li>1 <a href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd>Threads (Tasks (threads) versus processes)</a><ul><li>1.1 <a href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159>cgroup v2 线程限制</a></li></ul></li></ul><h2 id=h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd>1 Threads (Tasks (threads) versus processes)
<a class=heading-link href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>cgroup v1 可以单独操作进程中的线程, <code>man cgroups</code> :</p><blockquote><p>In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of
multiple tasks (more commonly called threads, from a user-space perspective, and called such in the
remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup
memberships of the threads in a process.</p></blockquote><p>v2 中起初移除了线程支持，然后在后期又将其中的功能 “有限的” 加了回来：</p><blockquote><p>The cgroups v1 ability to split threads across different cgroups caused problems in some cases. For example, it
made no sense for the memory controller, since all of the threads of a process share a single address space.
Because of these problems, the ability to independently manipulate the cgroup memberships of the threads in a
process was removed in the initial cgroups v2 implementation, and subsequently restored in a more limited form
(see the discussion of &ldquo;thread mode&rdquo; below).</p></blockquote><h3 id=h:5fc61e35-bc73-442b-a063-74b0de3cf159>1.1 cgroup v2 线程限制
<a class=heading-link href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p>Linux 4.14 为 cgroup v2 增加了线程模式，该模式可以：</p><blockquote><p>• The creation of threaded subtrees in which the threads of a process may be spread across cgroups inside
the tree. (A threaded subtree may contain multiple multithreaded processes.)</p><p>• The concept of threaded controllers, which can distribute resources across the cgroups in a threaded
subtree.</p><p>• A relaxation of the &ldquo;no internal processes rule&rdquo;, so that, within a threaded subtree, a cgroup can both
contain member threads and exercise resource control over child cgroups.</p></blockquote></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2023
yyc
·
技术支持 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>