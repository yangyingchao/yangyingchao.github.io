<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>cgroup memo | MyNotes</title><meta name=keywords content="tag1,tag2"><meta name=description content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective,"><meta name=author content><link rel=canonical href=https://yangyingchao.github.io/posts/cgroup-memo/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yangyingchao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yangyingchao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangyingchao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://yangyingchao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://yangyingchao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="cgroup memo"><meta property="og:description" content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective,"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/cgroup-memo/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="cgroup memo"><meta name=twitter:description content="1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective,"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://yangyingchao.github.io/posts/"},{"@type":"ListItem","position":3,"name":"cgroup memo","item":"https://yangyingchao.github.io/posts/cgroup-memo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"cgroup memo","name":"cgroup memo","description":"1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups : In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective,","keywords":["tag1","tag2"],"articleBody":" 1 Threads (Tasks (threads) versus processes) 1.1 cgroup v2 线程限制 1 Threads (Tasks (threads) versus processes) cgroup v1 可以单独操作进程中的线程, man cgroups :\nIn cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of multiple tasks (more commonly called threads, from a user-space perspective, and called such in the remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup memberships of the threads in a process.\nv2 中起初移除了线程支持，然后在后期又将其中的功能 “有限的” 加了回来：\nThe cgroups v1 ability to split threads across different cgroups caused problems in some cases. For example, it made no sense for the memory controller, since all of the threads of a process share a single address space. Because of these problems, the ability to independently manipulate the cgroup memberships of the threads in a process was removed in the initial cgroups v2 implementation, and subsequently restored in a more limited form (see the discussion of “thread mode” below).\n1.1 cgroup v2 线程限制 Linux 4.14 为 cgroup v2 增加了线程模式，该模式可以：\n• The creation of threaded subtrees in which the threads of a process may be spread across cgroups inside the tree. (A threaded subtree may contain multiple multithreaded processes.)\n• The concept of threaded controllers, which can distribute resources across the cgroups in a threaded subtree.\n• A relaxation of the “no internal processes rule”, so that, within a threaded subtree, a cgroup can both contain member threads and exercise resource control over child cgroups.\n","wordCount":"312","inLanguage":"zh-cn","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://yangyingchao.github.io/posts/cgroup-memo/"},"publisher":{"@type":"Organization","name":"MyNotes","logo":{"@type":"ImageObject","url":"https://yangyingchao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yangyingchao.github.io accesskey=h title="MyNotes (Alt + H)">MyNotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yangyingchao.github.io/ title=Home><span>Home</span></a></li><li><a href=https://yangyingchao.github.io/posts/ title=Archives><span>Archives</span></a></li><li><a href=https://yangyingchao.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yangyingchao.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://yangyingchao.github.io/contact/ title="Contact me"><span>Contact me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>cgroup memo</h1><div class=post-meta></div></header><div class=post-content><ul><li>1 <a href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd>Threads (Tasks (threads) versus processes)</a><ul><li>1.1 <a href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159>cgroup v2 线程限制</a></li></ul></li></ul><h2 id=h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd>1 Threads (Tasks (threads) versus processes)<a hidden class=anchor aria-hidden=true href=#h:6aa67997-fe0b-4ae0-a304-d51dad6f82fd>#</a></h2><p>cgroup v1 可以单独操作进程中的线程, <code>man cgroups</code> :</p><blockquote><p>In cgroups v1, a distinction is drawn between processes and tasks. In this view, a process can con‐ sist of
multiple tasks (more commonly called threads, from a user-space perspective, and called such in the
remainder of this man page). In cgroups v1, it is possible to independently manipulate the cgroup
memberships of the threads in a process.</p></blockquote><p>v2 中起初移除了线程支持，然后在后期又将其中的功能 “有限的” 加了回来：</p><blockquote><p>The cgroups v1 ability to split threads across different cgroups caused problems in some cases. For example, it
made no sense for the memory controller, since all of the threads of a process share a single address space.
Because of these problems, the ability to independently manipulate the cgroup memberships of the threads in a
process was removed in the initial cgroups v2 implementation, and subsequently restored in a more limited form
(see the discussion of &ldquo;thread mode&rdquo; below).</p></blockquote><h3 id=h:5fc61e35-bc73-442b-a063-74b0de3cf159>1.1 cgroup v2 线程限制<a hidden class=anchor aria-hidden=true href=#h:5fc61e35-bc73-442b-a063-74b0de3cf159>#</a></h3><p>Linux 4.14 为 cgroup v2 增加了线程模式，该模式可以：</p><blockquote><p>• The creation of threaded subtrees in which the threads of a process may be spread across cgroups inside
the tree. (A threaded subtree may contain multiple multithreaded processes.)</p><p>• The concept of threaded controllers, which can distribute resources across the cgroups in a threaded
subtree.</p><p>• A relaxation of the &ldquo;no internal processes rule&rdquo;, so that, within a threaded subtree, a cgroup can both
contain member threads and exercise resource control over child cgroups.</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://yangyingchao.github.io/tags/tag1/>tag1</a></li><li><a href=https://yangyingchao.github.io/tags/tag2/>tag2</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://yangyingchao.github.io>MyNotes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>