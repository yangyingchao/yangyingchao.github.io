<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PolarDB for PostgreSQL架构介绍 | MyNotes</title><meta name=keywords content="polardb"><meta name=description content="1 传统数据库的问题 2 PolarDB PostgreSQL 版云原生数据库的优势 3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 3.2 HTAP 架构概述 本文为摘录，原文为： https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je PolarDB PostgreSQL 版是一款阿里云自"><meta name=author content="Yang, Ying-chao"><link rel=canonical href=https://yangyingchao.github.io/posts/polardb-for-postgresql%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://yangyingchao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yangyingchao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangyingchao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://yangyingchao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://yangyingchao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="PolarDB for PostgreSQL架构介绍"><meta property="og:description" content="1 传统数据库的问题 2 PolarDB PostgreSQL 版云原生数据库的优势 3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 3.2 HTAP 架构概述 本文为摘录，原文为： https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je PolarDB PostgreSQL 版是一款阿里云自"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/polardb-for-postgresql%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-11T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="PolarDB for PostgreSQL架构介绍"><meta name=twitter:description content="1 传统数据库的问题 2 PolarDB PostgreSQL 版云原生数据库的优势 3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 3.2 HTAP 架构概述 本文为摘录，原文为： https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je PolarDB PostgreSQL 版是一款阿里云自"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://yangyingchao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"PolarDB for PostgreSQL架构介绍","item":"https://yangyingchao.github.io/posts/polardb-for-postgresql%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PolarDB for PostgreSQL架构介绍","name":"PolarDB for PostgreSQL架构介绍","description":"1 传统数据库的问题 2 PolarDB PostgreSQL 版云原生数据库的优势 3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 3.2 HTAP 架构概述 本文为摘录，原文为： https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je PolarDB PostgreSQL 版是一款阿里云自","keywords":["polardb"],"articleBody":" 1 传统数据库的问题 2 PolarDB PostgreSQL 版云原生数据库的优势 3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 3.2 HTAP 架构概述 本文为摘录，原文为： https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je\nPolarDB PostgreSQL 版是一款阿里云自主研发的企业级数据库产品，采用计算存储分离架构，兼容 PostgreSQL 与 Oracle。PolarDB PostgreSQL 版的存储与计算能力均可横向扩展，具有高可靠、高可用、 弹性扩展等企业级数据库特性。同时，PolarDB PostgreSQL 版具有大规模并行计算能力，可以应对 OLTP 与 OLAP 混合负载。还具有时空、向量、搜索、图谱等多模创新特性，可以满足企业对数据处理日 新月异的新需求。\nPolarDB PostgreSQL 版支持多种部署形态：存储计算分离部署、X-Paxos 三节点部署以及本地盘部署。\n1 传统数据库的问题 随着用户业务数据量越来越大，业务越来越复杂，传统数据库系统面临巨大挑战，例如：\n存储空间无法超过单机上限。 通过只读实例进行读扩展，每个只读实例独享一份存储，成本增加。 随着数据量增加，创建只读实例的耗时增加。 主备延迟高。 2 PolarDB PostgreSQL 版云原生数据库的优势 针对上述传统数据库的问题，阿里云研发了 PolarDB PostgreSQL 版云原生数据库。采用了自主研发 的计算集群和存储集群分离的架构。具备如下优势：\n扩展性：存储计算分离，极致弹性。\n成本：共享一份数据，存储成本低。\n易用性：一写多读，透明读写分离。\n可靠性：三副本、秒级备份。\n3 PolarDB PostgreSQL 版整体架构概述 3.1 存储计算分离架构概述 PolarDB PostgreSQL 版是存储计算分离的设计，存储集群和计算集群可以分别独立扩展：\n当计算能力不够时，可以单独扩展计算集群。 当存储容量不够时，可以单独扩展存储集群。 基于 Shared-Storage，主节点和多个只读节点共享一份存储数据，主节点刷脏不能再按照传统的刷 脏方式，否则会导致以下问题：\n只读节点在存储中读取的页面，可能是比较老的版本，不符合当前的状态。 只读节点读取到的页面比自身内存中想要的数据要超前。 主节点切换到只读节点时，只读节点接管数据更新时，存储中的页面可能是旧的，需要读取日志 重新对脏页的恢复。 对于第一个问题，我们需要有页面多版本能力；对于第二个问题，我们需要主库控制脏页的刷脏速度。\n3.2 HTAP 架构概述 读写分离后，单个计算节点无法发挥出存储侧大 IO 带宽的优势，也无法通过增加计算资源来加速大 的查询。PolarDB PostgreSQL 版推出了基于 Shared-Storage 的 MPP 分布式并行执行，来加速在 OLTP 场 景下 OLAP 查询。\nPolarDB PostgreSQL 版支持一套 OLTP 场景型的数据在以下两种计算引擎中使用：\n单机执行引擎：处理高并发的 OLTP 型负载。 分布式执行引擎：处理大查询的 OLAP 型负载。 在使用相同的硬件资源时性能达到了传统 MPP 数仓的 90%，同时具备了 SQL 级别的弹性：在计算能 力不足时，可随时增加参与 OLAP 分析查询的 CPU，而数据无需重分布。\n","wordCount":"1060","inLanguage":"zh-cn","datePublished":"2023-12-11T00:00:00Z","dateModified":"2023-12-11T00:00:00Z","author":[{"@type":"Person","name":"Yang"},{"@type":"Person","name":"Ying-chao"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://yangyingchao.github.io/posts/polardb-for-postgresql%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/"},"publisher":{"@type":"Organization","name":"MyNotes","logo":{"@type":"ImageObject","url":"https://yangyingchao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yangyingchao.github.io accesskey=h title="MyNotes (Alt + H)">MyNotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yangyingchao.github.io/ title=Home><span>Home</span></a></li><li><a href=https://yangyingchao.github.io/posts/ title=Archives><span>Archives</span></a></li><li><a href=https://yangyingchao.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yangyingchao.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://yangyingchao.github.io/contact/ title="Contact me"><span>Contact me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">PolarDB for PostgreSQL架构介绍</h1><div class=post-meta><span title='2023-12-11 00:00:00 +0000 UTC'>December 11, 2023</span>&nbsp;·&nbsp;Yang, Ying-chao</div></header><div class=post-content><ul><li>1 <a href=#h:f57c62f8-df86-41c9-a6e8-1048a25422f0>传统数据库的问题</a></li><li>2 <a href=#h:6ae075ee-3296-4003-867e-6272f982164a>PolarDB PostgreSQL 版云原生数据库的优势</a></li><li>3 <a href=#h:840385d4-1082-448d-8654-c75053a33282>PolarDB PostgreSQL 版整体架构概述</a><ul><li>3.1 <a href=#h:3bac129c-7fec-491a-934b-88c823245954>存储计算分离架构概述</a></li><li>3.2 <a href=#h:2b3aaddd-8c62-4596-b2e2-030f4ed00f3c>HTAP 架构概述</a></li></ul></li></ul><p>本文为摘录，原文为： <a href="https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je">https://help.aliyun.com/zh/polardb/polardb-for-postgresql/polardb-for-postgresql-architecture/?spm=a2c4g.11186623.0.0.2e3b5fb1p0L9je</a></p><p>PolarDB PostgreSQL 版是一款阿里云自主研发的企业级数据库产品，采用计算存储分离架构，兼容
PostgreSQL 与 Oracle。PolarDB PostgreSQL 版的存储与计算能力均可横向扩展，具有高可靠、高可用、
弹性扩展等企业级数据库特性。同时，PolarDB PostgreSQL 版具有大规模并行计算能力，可以应对
OLTP 与 OLAP 混合负载。还具有时空、向量、搜索、图谱等多模创新特性，可以满足企业对数据处理日
新月异的新需求。</p><p>PolarDB PostgreSQL 版支持多种部署形态：存储计算分离部署、X-Paxos 三节点部署以及本地盘部署。</p><h2 id=h:f57c62f8-df86-41c9-a6e8-1048a25422f0>1 传统数据库的问题<a hidden class=anchor aria-hidden=true href=#h:f57c62f8-df86-41c9-a6e8-1048a25422f0>#</a></h2><p>随着用户业务数据量越来越大，业务越来越复杂，传统数据库系统面临巨大挑战，例如：</p><ul><li>存储空间无法超过单机上限。</li><li>通过只读实例进行读扩展，每个只读实例独享一份存储，成本增加。</li><li>随着数据量增加，创建只读实例的耗时增加。</li><li>主备延迟高。</li></ul><h2 id=h:6ae075ee-3296-4003-867e-6272f982164a>2 PolarDB PostgreSQL 版云原生数据库的优势<a hidden class=anchor aria-hidden=true href=#h:6ae075ee-3296-4003-867e-6272f982164a>#</a></h2><p>针对上述传统数据库的问题，阿里云研发了 PolarDB PostgreSQL 版云原生数据库。采用了自主研发
的计算集群和存储集群分离的架构。具备如下优势：</p><ul><li><p>扩展性：存储计算分离，极致弹性。</p></li><li><p>成本：共享一份数据，存储成本低。</p></li><li><p>易用性：一写多读，透明读写分离。</p></li><li><p>可靠性：三副本、秒级备份。</p><figure><img loading=lazy src=/ox-hugo/p523755.png width=800px></figure></li></ul><h2 id=h:840385d4-1082-448d-8654-c75053a33282>3 PolarDB PostgreSQL 版整体架构概述<a hidden class=anchor aria-hidden=true href=#h:840385d4-1082-448d-8654-c75053a33282>#</a></h2><h3 id=h:3bac129c-7fec-491a-934b-88c823245954>3.1 存储计算分离架构概述<a hidden class=anchor aria-hidden=true href=#h:3bac129c-7fec-491a-934b-88c823245954>#</a></h3><figure><img loading=lazy src=/ox-hugo/p523768.png width=800px></figure><p>PolarDB PostgreSQL 版是存储计算分离的设计，存储集群和计算集群可以分别独立扩展：</p><ul><li>当计算能力不够时，可以单独扩展计算集群。</li><li>当存储容量不够时，可以单独扩展存储集群。</li></ul><p>基于 Shared-Storage，主节点和多个只读节点共享一份存储数据，主节点刷脏不能再按照传统的刷
脏方式，否则会导致以下问题：</p><ul><li>只读节点在存储中读取的页面，可能是比较老的版本，不符合当前的状态。</li><li>只读节点读取到的页面比自身内存中想要的数据要超前。</li><li>主节点切换到只读节点时，只读节点接管数据更新时，存储中的页面可能是旧的，需要读取日志
重新对脏页的恢复。</li></ul><p>对于第一个问题，我们需要有页面多版本能力；对于第二个问题，我们需要主库控制脏页的刷脏速度。</p><h3 id=h:2b3aaddd-8c62-4596-b2e2-030f4ed00f3c>3.2 HTAP 架构概述<a hidden class=anchor aria-hidden=true href=#h:2b3aaddd-8c62-4596-b2e2-030f4ed00f3c>#</a></h3><p>读写分离后，单个计算节点无法发挥出存储侧大 IO 带宽的优势，也无法通过增加计算资源来加速大
的查询。PolarDB PostgreSQL 版推出了基于 Shared-Storage 的 MPP 分布式并行执行，来加速在 OLTP 场
景下 OLAP 查询。</p><p>PolarDB PostgreSQL 版支持一套 OLTP 场景型的数据在以下两种计算引擎中使用：</p><ul><li>单机执行引擎：处理高并发的 OLTP 型负载。</li><li>分布式执行引擎：处理大查询的 OLAP 型负载。</li></ul><figure><img loading=lazy src=/ox-hugo/p523773.png width=800px></figure><p>在使用相同的硬件资源时性能达到了传统 MPP 数仓的 90%，同时具备了 SQL 级别的弹性：在计算能
力不足时，可随时增加参与 OLAP 分析查询的 CPU，而数据无需重分布。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://yangyingchao.github.io/tags/polardb/>polardb</a></li></ul></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//disqus_yH1vi2Slvj.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://yangyingchao.github.io>MyNotes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>