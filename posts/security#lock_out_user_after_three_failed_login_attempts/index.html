<!doctype html><html lang=zh-cn><head><title>Lock out user after three failed login attempts · MyNotes</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="yyc"><meta name=description content="1 Lock out user after three failed login attempts 本文为摘录，原文为： https://wiki.archlinux.org/title/Security#Lock_out_user_after_three_failed_login_attempts 1 Lock out user after three failed login attempts 链接到标题 截至 pambase 20200721.1-2 版本，pam_faillock.so 已默认启用，当用户在 15 分钟内"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lock out user after three failed login attempts"><meta name=twitter:description content="1 Lock out user after three failed login attempts 本文为摘录，原文为： https://wiki.archlinux.org/title/Security#Lock_out_user_after_three_failed_login_attempts 1 Lock out user after three failed login attempts 链接到标题 截至 pambase 20200721.1-2 版本，pam_faillock.so 已默认启用，当用户在 15 分钟内"><meta property="og:title" content="Lock out user after three failed login attempts"><meta property="og:description" content="1 Lock out user after three failed login attempts 本文为摘录，原文为： https://wiki.archlinux.org/title/Security#Lock_out_user_after_three_failed_login_attempts 1 Lock out user after three failed login attempts 链接到标题 截至 pambase 20200721.1-2 版本，pam_faillock.so 已默认启用，当用户在 15 分钟内"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/security#lock_out_user_after_three_failed_login_attempts/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-21T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-21T00:00:00+00:00"><link rel=canonical href=https://yangyingchao.github.io/posts/security#lock_out_user_after_three_failed_login_attempts/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.135e22c97ff685fe983fc60048e309ced8f00d8d38f536aa67dba8a13a03dfa4.css integrity="sha256-E14iyX/2hf6YP8YASOMJztjwDY049TaqZ9uooToD36Q=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>MyNotes</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://yangyingchao.github.io/posts/security#lock_out_user_after_three_failed_login_attempts/>Lock out user after three failed login attempts</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2023-08-21T00:00:00Z>August 21, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：2 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/lock/>lock</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/deny/>deny</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/security/>security</a></span></div></div></header><div class=post-content><ul><li>1 <a href=#h:38aae4aa-a802-4cff-9ffb-1ecebc230218>Lock out user after three failed login attempts</a></li></ul><p>本文为摘录，原文为： <a href=https://wiki.archlinux.org/title/Security#Lock_out_user_after_three_failed_login_attempts class=external-link target=_blank rel=noopener>https://wiki.archlinux.org/title/Security#Lock_out_user_after_three_failed_login_attempts</a></p><h2 id=h:38aae4aa-a802-4cff-9ffb-1ecebc230218>1 Lock out user after three failed login attempts
<a class=heading-link href=#h:38aae4aa-a802-4cff-9ffb-1ecebc230218><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>截至 pambase 20200721.1-2 版本，pam_faillock.so 已默认启用，当用户在 15 分钟内尝试 3 次登录失败后会将其锁定 10 分钟
（参见 FS＃67644）。锁定仅适用于密码验证（例如登录和 sudo），通过 SSH 的公钥验证仍然被接受。为了防止完全的拒绝服务，对于默认情况下 root 用户将不会被锁定。</p><p>要解除用户的锁定，请执行以下操作：</p><p>$ faillock –user username –reset</p><p>默认情况下，锁定机制是每个用户一个文件，位于 /run/faillock/。删除或清空文件将解锁该用户——该目录由 root 拥有，但文件由用户拥有，因此 faillock 命令仅清空文件，因此不需要 root。</p><p>模块 pam_faillock.so 可以通过文件/etc/security/faillock.conf 进行配置。锁定参数如下：</p><ul><li>unlock_time—— 锁定时间（秒为单位，默认为 10 分钟）</li><li>fail_interval—— 允许登录失败引起锁定的时间（以秒为单位，默认值为 15 分钟）</li><li>deny—— 锁定之前的登录失败次数（默认值为 3）</li></ul><p>提示：锁定的主要目的是放慢暴力攻击的速度，使其变得不可行。因此，如果由于密码输错而导致锁定过于频繁，则可以放宽尝试次数以而不是减少锁定时间。</p><p>注意：deny = 0 将完全禁用锁定机制。</p><p>默认情况下，所有用户锁定在重新启动后都会失效。如果攻击者可以重新启动计算机，则使锁定持续存在更为安全。要使锁定持久存在，请将/etc/security/faillock.conf 中的 dir 参数更改为 /var/lib/faillock。</p><p>更改不需要重新启动即可生效。请参阅 faillock.conf(5) 以获取更多配置选项，例如启用 root 帐户的锁定，禁用集中登录（例如 LDAP）等。</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2023
yyc
·
技术支持 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>