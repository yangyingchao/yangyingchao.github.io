<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Design and Implementation of Modern Column-Oriented Database Systems | MyNotes</title><meta name=keywords content="tag1,tag2"><meta name=description content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><meta name=author content><link rel=canonical href=https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yangyingchao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yangyingchao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangyingchao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://yangyingchao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://yangyingchao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="The Design and Implementation of Modern Column-Oriented Database Systems"><meta property="og:description" content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Design and Implementation of Modern Column-Oriented Database Systems"><meta name=twitter:description content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://yangyingchao.github.io/posts/"},{"@type":"ListItem","position":3,"name":"The Design and Implementation of Modern Column-Oriented Database Systems","item":"https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Design and Implementation of Modern Column-Oriented Database Systems","name":"The Design and Implementation of Modern Column-Oriented Database Systems","description":"1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\\\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating","keywords":["tag1","tag2"],"articleBody":" 1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\\\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating Directly on Compressed Data 压缩态计算 2.4 Late Materialization 本文为摘录，原文为： attachments/pdf/d/The Design and Implementation of Modern Column-Oriented Database Systems (abadi-column-stores).pdf\n1 Introduction 1.1 Virtual IDs 通过固定大小来存储数据，省掉存储 ID 的开销\n1.2 Block-oriented and vectorized processing \\\\ CPU 效率和 Cache 使用率更高 算子间传递多个 tuple 组成的 block 每个 block 大小为 cache size 大小 每个 block 中一般包含多个记录 自动向量化（编译器 + CPU） 1.3 Late materialization 晚期物化 延迟将多列 join 成宽表的时机 1.4 Column-specific compression 1.5 Direct operation on compressed data 尽量让数据以压缩方式存储在内存中，对其进行操作，直到必需的时候再解压给外层。\n1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.2.1 Run-length Encoding 2.2.2 Bit-Vector Encoding 2.2.3 Dictionary 2.2.4 Frame Of Reference (FOR) 2.2.5 The Patching Technique 2.3 Operating Directly on Compressed Data 压缩态计算 This benefit is magnified for compression schemes like run length encoding that combine multiple values within a column inside a single compression symbol. Operating directly on compressed data requires modifica- tions to the query execution engine. 2.4 Late Materialization ","wordCount":"365","inLanguage":"zh-cn","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/"},"publisher":{"@type":"Organization","name":"MyNotes","logo":{"@type":"ImageObject","url":"https://yangyingchao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yangyingchao.github.io accesskey=h title="MyNotes (Alt + H)">MyNotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yangyingchao.github.io/ title=Home><span>Home</span></a></li><li><a href=https://yangyingchao.github.io/posts/ title=Archives><span>Archives</span></a></li><li><a href=https://yangyingchao.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yangyingchao.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://yangyingchao.github.io/contact/ title="Contact me"><span>Contact me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>The Design and Implementation of Modern Column-Oriented Database Systems</h1><div class=post-meta></div></header><div class=post-content><ul><li>1 <a href=#h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb>Introduction</a><ul><li>1.1 <a href=#h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1>Virtual IDs</a></li><li>1.2 <a href=#h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9>Block-oriented and vectorized processing \\</a></li><li>1.3 <a href=#h:316f88be-6095-440c-824d-2854f8f5ed3b>Late materialization 晚期物化</a></li><li>1.4 <a href=#h:6d9d9f56-20b9-46a0-af3c-a97c37122b77>Column-specific compression</a></li><li>1.5 <a href=#h:024e71c4-1d2b-4d76-a57f-a1b4c3432355>Direct operation on compressed data</a></li><li>1.6 <a href=#h:a07de8d4-2df1-4961-963d-54c00cb99139>Efficient join implementations</a></li><li>1.7 <a href=#h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41>Redundant representation of individual columns in dif- ferent sort orders</a></li><li>1.8 <a href=#h:68b92fa7-1e6b-4e68-b046-49b994359f86>Database cracking and adaptive indexing</a></li><li>1.9 <a href=#h:4705376a-f8ab-4314-b009-22b9fc0b6ef8>Efficient loading architectures</a></li></ul></li><li>2 <a href=#h:54e3a749-27e2-46db-8446-154b812ae2b7>Column-store internals and advanced techniques</a><ul><li>2.1 <a href=#h:0cdfb744-7374-4e23-b52e-2bf01165cf66>Vectorized Processing 向量化处理</a></li><li>2.2 <a href=#h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330>Compression</a></li><li>2.3 <a href=#h:bcd324ec-1990-42c8-9b51-87ad6da5869b>Operating Directly on Compressed Data 压缩态计算</a></li><li>2.4 <a href=#h:7f251c9e-5241-4615-8478-dafb2890693c>Late Materialization</a></li></ul></li></ul><p>本文为摘录，原文为： attachments/pdf/d/The Design and Implementation of Modern Column-Oriented Database Systems (abadi-column-stores).pdf</p><h2 id=h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb>1 Introduction<a hidden class=anchor aria-hidden=true href=#h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb>#</a></h2><h3 id=h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1>1.1 Virtual IDs<a hidden class=anchor aria-hidden=true href=#h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1>#</a></h3><p>通过固定大小来存储数据，省掉存储 ID 的开销</p><figure><img loading=lazy src=/ox-hugo/screenshot@2023-03-02_11:35:50.png></figure><h3 id=h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9>1.2 Block-oriented and vectorized processing \\<a hidden class=anchor aria-hidden=true href=#h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9>#</a></h3><ul><li>CPU 效率和 Cache 使用率更高<ul><li>算子间传递多个 tuple 组成的 block</li><li>每个 block 大小为 cache size 大小</li><li>每个 block 中一般包含多个记录</li><li>自动向量化（编译器 + CPU）</li></ul></li></ul><h3 id=h:316f88be-6095-440c-824d-2854f8f5ed3b>1.3 Late materialization 晚期物化<a hidden class=anchor aria-hidden=true href=#h:316f88be-6095-440c-824d-2854f8f5ed3b>#</a></h3><ul><li>延迟将多列 join 成宽表的时机</li></ul><h3 id=h:6d9d9f56-20b9-46a0-af3c-a97c37122b77>1.4 Column-specific compression<a hidden class=anchor aria-hidden=true href=#h:6d9d9f56-20b9-46a0-af3c-a97c37122b77>#</a></h3><h3 id=h:024e71c4-1d2b-4d76-a57f-a1b4c3432355>1.5 Direct operation on compressed data<a hidden class=anchor aria-hidden=true href=#h:024e71c4-1d2b-4d76-a57f-a1b4c3432355>#</a></h3><p>尽量让数据以压缩方式存储在内存中，对其进行操作，直到必需的时候再解压给外层。</p><h3 id=h:a07de8d4-2df1-4961-963d-54c00cb99139>1.6 Efficient join implementations<a hidden class=anchor aria-hidden=true href=#h:a07de8d4-2df1-4961-963d-54c00cb99139>#</a></h3><h3 id=h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41>1.7 Redundant representation of individual columns in dif- ferent sort orders<a hidden class=anchor aria-hidden=true href=#h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41>#</a></h3><h3 id=h:68b92fa7-1e6b-4e68-b046-49b994359f86>1.8 Database cracking and adaptive indexing<a hidden class=anchor aria-hidden=true href=#h:68b92fa7-1e6b-4e68-b046-49b994359f86>#</a></h3><h3 id=h:4705376a-f8ab-4314-b009-22b9fc0b6ef8>1.9 Efficient loading architectures<a hidden class=anchor aria-hidden=true href=#h:4705376a-f8ab-4314-b009-22b9fc0b6ef8>#</a></h3><h2 id=h:54e3a749-27e2-46db-8446-154b812ae2b7>2 Column-store internals and advanced techniques<a hidden class=anchor aria-hidden=true href=#h:54e3a749-27e2-46db-8446-154b812ae2b7>#</a></h2><h3 id=h:0cdfb744-7374-4e23-b52e-2bf01165cf66>2.1 Vectorized Processing 向量化处理<a hidden class=anchor aria-hidden=true href=#h:0cdfb744-7374-4e23-b52e-2bf01165cf66>#</a></h3><h3 id=h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330>2.2 Compression<a hidden class=anchor aria-hidden=true href=#h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330>#</a></h3><h4 id=h:7a8bef04-ec63-4b0f-98c5-28f5d6455534>2.2.1 Run-length Encoding<a hidden class=anchor aria-hidden=true href=#h:7a8bef04-ec63-4b0f-98c5-28f5d6455534>#</a></h4><h4 id=h:378fdd15-95c9-430f-8cec-5b8ed03c7b37>2.2.2 Bit-Vector Encoding<a hidden class=anchor aria-hidden=true href=#h:378fdd15-95c9-430f-8cec-5b8ed03c7b37>#</a></h4><h4 id=h:9b466ee6-89ac-439a-bc8c-670d6992a676>2.2.3 Dictionary<a hidden class=anchor aria-hidden=true href=#h:9b466ee6-89ac-439a-bc8c-670d6992a676>#</a></h4><h4 id=h:2675f355-c316-4d73-ad41-d9d9ea6c2fdd>2.2.4 Frame Of Reference (FOR)<a hidden class=anchor aria-hidden=true href=#h:2675f355-c316-4d73-ad41-d9d9ea6c2fdd>#</a></h4><h4 id=h:ab2a36d8-0a3c-4de9-8871-6a944e2feee8>2.2.5 The Patching Technique<a hidden class=anchor aria-hidden=true href=#h:ab2a36d8-0a3c-4de9-8871-6a944e2feee8>#</a></h4><h3 id=h:bcd324ec-1990-42c8-9b51-87ad6da5869b>2.3 Operating Directly on Compressed Data 压缩态计算<a hidden class=anchor aria-hidden=true href=#h:bcd324ec-1990-42c8-9b51-87ad6da5869b>#</a></h3><ul><li>This benefit is magnified for compression schemes like run length encoding that combine multiple values within a column inside a single compression symbol.</li><li>Operating directly on compressed data requires modifica- tions to the query execution engine.</li></ul><h3 id=h:7f251c9e-5241-4615-8478-dafb2890693c>2.4 Late Materialization<a hidden class=anchor aria-hidden=true href=#h:7f251c9e-5241-4615-8478-dafb2890693c>#</a></h3></div><footer class=post-footer><ul class=post-tags><li><a href=https://yangyingchao.github.io/tags/tag1/>tag1</a></li><li><a href=https://yangyingchao.github.io/tags/tag2/>tag2</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://yangyingchao.github.io>MyNotes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>