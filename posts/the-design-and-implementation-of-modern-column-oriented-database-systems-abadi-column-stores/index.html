<!doctype html><html lang=zh-cn><head><title>The Design and Implementation of Modern Column-Oriented Database Systems · MyNotes</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="yyc"><meta name=description content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Design and Implementation of Modern Column-Oriented Database Systems"><meta name=twitter:description content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><meta property="og:title" content="The Design and Implementation of Modern Column-Oriented Database Systems"><meta property="og:description" content="1 Introduction 1.1 Virtual IDs 1.2 Block-oriented and vectorized processing \\ 1.3 Late materialization 晚期物化 1.4 Column-specific compression 1.5 Direct operation on compressed data 1.6 Efficient join implementations 1.7 Redundant representation of individual columns in dif- ferent sort orders 1.8 Database cracking and adaptive indexing 1.9 Efficient loading architectures 2 Column-store internals and advanced techniques 2.1 Vectorized Processing 向量化处理 2.2 Compression 2.3 Operating"><meta property="og:type" content="article"><meta property="og:url" content="https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/"><meta property="article:section" content="posts"><link rel=canonical href=https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.135e22c97ff685fe983fc60048e309ced8f00d8d38f536aa67dba8a13a03dfa4.css integrity="sha256-E14iyX/2hf6YP8YASOMJztjwDY049TaqZ9uooToD36Q=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>MyNotes</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://yangyingchao.github.io/posts/the-design-and-implementation-of-modern-column-oriented-database-systems-abadi-column-stores/>The Design and Implementation of Modern Column-Oriented Database Systems</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=0001-01-01T00:00:00Z>January 1, 0001</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：1 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/tag1/>tag1</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/tag2/>tag2</a></span></div></div></header><div class=post-content><ul><li>1 <a href=#h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb>Introduction</a><ul><li>1.1 <a href=#h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1>Virtual IDs</a></li><li>1.2 <a href=#h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9>Block-oriented and vectorized processing \\</a></li><li>1.3 <a href=#h:316f88be-6095-440c-824d-2854f8f5ed3b>Late materialization 晚期物化</a></li><li>1.4 <a href=#h:6d9d9f56-20b9-46a0-af3c-a97c37122b77>Column-specific compression</a></li><li>1.5 <a href=#h:024e71c4-1d2b-4d76-a57f-a1b4c3432355>Direct operation on compressed data</a></li><li>1.6 <a href=#h:a07de8d4-2df1-4961-963d-54c00cb99139>Efficient join implementations</a></li><li>1.7 <a href=#h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41>Redundant representation of individual columns in dif- ferent sort orders</a></li><li>1.8 <a href=#h:68b92fa7-1e6b-4e68-b046-49b994359f86>Database cracking and adaptive indexing</a></li><li>1.9 <a href=#h:4705376a-f8ab-4314-b009-22b9fc0b6ef8>Efficient loading architectures</a></li></ul></li><li>2 <a href=#h:54e3a749-27e2-46db-8446-154b812ae2b7>Column-store internals and advanced techniques</a><ul><li>2.1 <a href=#h:0cdfb744-7374-4e23-b52e-2bf01165cf66>Vectorized Processing 向量化处理</a></li><li>2.2 <a href=#h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330>Compression</a></li><li>2.3 <a href=#h:bcd324ec-1990-42c8-9b51-87ad6da5869b>Operating Directly on Compressed Data 压缩态计算</a></li><li>2.4 <a href=#h:7f251c9e-5241-4615-8478-dafb2890693c>Late Materialization</a></li></ul></li></ul><p>本文为摘录，原文为： attachments/pdf/d/The Design and Implementation of Modern Column-Oriented Database Systems (abadi-column-stores).pdf</p><h2 id=h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb>1 Introduction
<a class=heading-link href=#h:1830f5bb-c40e-4e6c-bb49-b7c5a663eafb><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1>1.1 Virtual IDs
<a class=heading-link href=#h:d0aa820f-c598-42ba-a0d8-3b91fc66b3c1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p>通过固定大小来存储数据，省掉存储 ID 的开销</p><figure><img src=/ox-hugo/screenshot@2023-03-02_11:35:50.png></figure><h3 id=h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9>1.2 Block-oriented and vectorized processing \\
<a class=heading-link href=#h:27970ca7-fdc5-47b7-8e35-b5681d23c7e9><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><ul><li>CPU 效率和 Cache 使用率更高<ul><li>算子间传递多个 tuple 组成的 block</li><li>每个 block 大小为 cache size 大小</li><li>每个 block 中一般包含多个记录</li><li>自动向量化（编译器 + CPU）</li></ul></li></ul><h3 id=h:316f88be-6095-440c-824d-2854f8f5ed3b>1.3 Late materialization 晚期物化
<a class=heading-link href=#h:316f88be-6095-440c-824d-2854f8f5ed3b><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><ul><li>延迟将多列 join 成宽表的时机</li></ul><h3 id=h:6d9d9f56-20b9-46a0-af3c-a97c37122b77>1.4 Column-specific compression
<a class=heading-link href=#h:6d9d9f56-20b9-46a0-af3c-a97c37122b77><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h3 id=h:024e71c4-1d2b-4d76-a57f-a1b4c3432355>1.5 Direct operation on compressed data
<a class=heading-link href=#h:024e71c4-1d2b-4d76-a57f-a1b4c3432355><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p>尽量让数据以压缩方式存储在内存中，对其进行操作，直到必需的时候再解压给外层。</p><h3 id=h:a07de8d4-2df1-4961-963d-54c00cb99139>1.6 Efficient join implementations
<a class=heading-link href=#h:a07de8d4-2df1-4961-963d-54c00cb99139><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h3 id=h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41>1.7 Redundant representation of individual columns in dif- ferent sort orders
<a class=heading-link href=#h:0b550a82-fc3d-4ca3-b8b2-a07cbf678b41><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h3 id=h:68b92fa7-1e6b-4e68-b046-49b994359f86>1.8 Database cracking and adaptive indexing
<a class=heading-link href=#h:68b92fa7-1e6b-4e68-b046-49b994359f86><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h3 id=h:4705376a-f8ab-4314-b009-22b9fc0b6ef8>1.9 Efficient loading architectures
<a class=heading-link href=#h:4705376a-f8ab-4314-b009-22b9fc0b6ef8><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h2 id=h:54e3a749-27e2-46db-8446-154b812ae2b7>2 Column-store internals and advanced techniques
<a class=heading-link href=#h:54e3a749-27e2-46db-8446-154b812ae2b7><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=h:0cdfb744-7374-4e23-b52e-2bf01165cf66>2.1 Vectorized Processing 向量化处理
<a class=heading-link href=#h:0cdfb744-7374-4e23-b52e-2bf01165cf66><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h3 id=h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330>2.2 Compression
<a class=heading-link href=#h:32d8ed7a-1090-4fb3-a9f4-7aaeec0cb330><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><h4 id=h:7a8bef04-ec63-4b0f-98c5-28f5d6455534>2.2.1 Run-length Encoding
<a class=heading-link href=#h:7a8bef04-ec63-4b0f-98c5-28f5d6455534><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h4><h4 id=h:378fdd15-95c9-430f-8cec-5b8ed03c7b37>2.2.2 Bit-Vector Encoding
<a class=heading-link href=#h:378fdd15-95c9-430f-8cec-5b8ed03c7b37><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h4><h4 id=h:9b466ee6-89ac-439a-bc8c-670d6992a676>2.2.3 Dictionary
<a class=heading-link href=#h:9b466ee6-89ac-439a-bc8c-670d6992a676><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h4><h4 id=h:2675f355-c316-4d73-ad41-d9d9ea6c2fdd>2.2.4 Frame Of Reference (FOR)
<a class=heading-link href=#h:2675f355-c316-4d73-ad41-d9d9ea6c2fdd><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h4><h4 id=h:ab2a36d8-0a3c-4de9-8871-6a944e2feee8>2.2.5 The Patching Technique
<a class=heading-link href=#h:ab2a36d8-0a3c-4de9-8871-6a944e2feee8><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h4><h3 id=h:bcd324ec-1990-42c8-9b51-87ad6da5869b>2.3 Operating Directly on Compressed Data 压缩态计算
<a class=heading-link href=#h:bcd324ec-1990-42c8-9b51-87ad6da5869b><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><ul><li>This benefit is magnified for compression schemes like run length encoding that combine multiple values within a column inside a single compression symbol.</li><li>Operating directly on compressed data requires modifica- tions to the query execution engine.</li></ul><h3 id=h:7f251c9e-5241-4615-8478-dafb2890693c>2.4 Late Materialization
<a class=heading-link href=#h:7f251c9e-5241-4615-8478-dafb2890693c><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2023
yyc
·
技术支持 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>